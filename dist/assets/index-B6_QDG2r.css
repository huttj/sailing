:root{--page-bg: #0a1628;--page-text: #e0e8f0;--panel-bg: rgba(10, 22, 40, .92);--panel-bg-opaque: rgba(10, 22, 40, .95);--panel-bg-medium: rgba(10, 22, 40, .8);--panel-bg-light: rgba(10, 22, 40, .7);--panel-bg-faint: rgba(10, 22, 40, .6);--body-bg: rgba(20, 36, 60, .7);--input-bg: rgba(20, 40, 70, .5);--hover-bg: rgba(20, 40, 70, .9);--interactive-bg: rgba(30, 55, 90, .35);--interactive-bg-dim: rgba(30, 55, 90, .25);--interactive-bg-strong: rgba(30, 60, 100, .4);--interactive-hover: rgba(40, 75, 120, .45);--interactive-hover-strong: rgba(40, 80, 140, .5);--accent-bg: rgba(60, 140, 220, .2);--accent-bg-hover: rgba(60, 140, 220, .4);--accent-bg-active: rgba(60, 140, 220, .3);--accent-bg-dim: rgba(60, 140, 220, .15);--border: rgba(100, 160, 220, .2);--border-medium: rgba(100, 160, 220, .25);--border-dim: rgba(100, 160, 220, .15);--border-faint: rgba(100, 160, 220, .12);--border-subtle: rgba(100, 160, 220, .1);--border-strong: rgba(100, 160, 220, .3);--border-bright: rgba(100, 160, 220, .4);--border-vivid: rgba(100, 160, 220, .5);--border-focus: rgba(100, 160, 220, .45);--accent-border: rgba(60, 140, 220, .6);--heading: #e0eaf4;--title: #c8ddf0;--body-text: #c8d8e8;--subheading: #d0e0f0;--accent: #8cc4f0;--accent-link: #6cb4f0;--text-secondary: rgba(180, 210, 240, .85);--text-chip: rgba(180, 210, 240, .8);--text-body-dim: rgba(180, 205, 230, .75);--text-blockquote: rgba(180, 200, 220, .8);--text-hover: rgba(180, 210, 240, .9);--text-muted: rgba(140, 180, 220, .7);--text-kind: rgba(140, 180, 220, .6);--text-tab: rgba(140, 180, 220, .55);--text-dim: rgba(140, 180, 220, .5);--text-faint: rgba(140, 180, 220, .45);--text-subtle: rgba(140, 180, 220, .4);--text-ghost: rgba(140, 180, 220, .35);--quote-text: rgba(160, 190, 220, .6);--entry-label: rgba(200, 220, 240, .85);--comment-text: rgba(180, 210, 240, .7);--highlight-bg: rgba(60, 140, 220, .3);--highlight-text: #e8f0f8;--highlight-shadow: rgba(60, 140, 220, .15);--highlight-underline: rgba(100, 180, 255, .5);--slider-track: rgba(60, 100, 160, .3);--slider-thumb: #6cb4f0;--star-inactive: rgba(180, 200, 220, .35);--star-active: #f0c040;--danger-bg: rgba(220, 80, 80, .1);--danger-border: rgba(220, 100, 100, .2);--danger-text: rgba(220, 130, 130, .7);--danger-hover-bg: rgba(220, 80, 80, .2);--danger-hover-text: rgba(240, 140, 140, .9);--scrollbar: rgba(100, 160, 220, .2);--scrollbar-hover: rgba(100, 160, 220, .4)}.light-mode{--page-bg: #e8e0d4;--page-text: #2a2420;--panel-bg: rgba(240, 235, 228, .95);--panel-bg-opaque: rgba(240, 235, 228, .98);--panel-bg-medium: rgba(240, 235, 228, .9);--panel-bg-light: rgba(240, 235, 228, .85);--panel-bg-faint: rgba(240, 235, 228, .75);--body-bg: rgba(235, 228, 218, .85);--input-bg: rgba(225, 218, 205, .7);--hover-bg: rgba(230, 222, 210, .95);--interactive-bg: rgba(180, 170, 155, .25);--interactive-bg-dim: rgba(180, 170, 155, .15);--interactive-bg-strong: rgba(170, 160, 140, .3);--interactive-hover: rgba(170, 155, 135, .35);--interactive-hover-strong: rgba(160, 145, 125, .4);--accent-bg: rgba(70, 120, 170, .15);--accent-bg-hover: rgba(70, 120, 170, .25);--accent-bg-active: rgba(70, 120, 170, .2);--accent-bg-dim: rgba(70, 120, 170, .1);--border: rgba(120, 100, 75, .2);--border-medium: rgba(120, 100, 75, .25);--border-dim: rgba(120, 100, 75, .15);--border-faint: rgba(120, 100, 75, .12);--border-subtle: rgba(120, 100, 75, .1);--border-strong: rgba(120, 100, 75, .3);--border-bright: rgba(120, 100, 75, .35);--border-vivid: rgba(120, 100, 75, .45);--border-focus: rgba(70, 120, 170, .4);--accent-border: rgba(70, 120, 170, .5);--heading: #2a2420;--title: #3a3430;--body-text: #3e3830;--subheading: #3a3430;--accent: #3a7ab0;--accent-link: #2a6a9a;--text-secondary: rgba(50, 40, 30, .75);--text-chip: rgba(50, 40, 30, .7);--text-body-dim: rgba(40, 32, 24, .85);--text-blockquote: rgba(60, 50, 40, .65);--text-hover: rgba(40, 30, 20, .85);--text-muted: rgba(60, 50, 35, .6);--text-kind: rgba(60, 50, 35, .55);--text-tab: rgba(60, 50, 35, .5);--text-dim: rgba(60, 50, 35, .5);--text-faint: rgba(60, 50, 35, .4);--text-subtle: rgba(60, 50, 35, .35);--text-ghost: rgba(60, 50, 35, .3);--quote-text: rgba(70, 60, 45, .55);--entry-label: rgba(40, 30, 20, .8);--comment-text: rgba(50, 40, 30, .65);--highlight-bg: rgba(70, 140, 200, .2);--highlight-text: #2a2420;--highlight-shadow: rgba(70, 140, 200, .1);--highlight-underline: rgba(70, 140, 200, .4);--slider-track: rgba(120, 100, 75, .25);--slider-thumb: #3a7ab0;--star-inactive: rgba(80, 70, 55, .3);--star-active: #d0a020;--danger-bg: rgba(200, 70, 70, .08);--danger-border: rgba(200, 80, 80, .2);--danger-text: rgba(180, 60, 60, .6);--danger-hover-bg: rgba(200, 70, 70, .15);--danger-hover-text: rgba(180, 50, 50, .8);--scrollbar: rgba(120, 100, 75, .2);--scrollbar-hover: rgba(120, 100, 75, .35)}*{margin:0;padding:0;box-sizing:border-box}html,body{width:100%;height:100%;overflow:hidden;background:var(--page-bg);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;color:var(--page-text)}#canvas-container{position:fixed;top:0;right:0;bottom:0;left:0;z-index:0}#canvas-container canvas{display:block;width:100%;height:100%}#sidebar{position:fixed;top:0;right:0;width:min(720px,40%);height:100%;background:var(--panel-bg);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-left:1px solid var(--border);z-index:10;display:flex;flex-direction:column;overflow:hidden;transition:transform .35s cubic-bezier(.4,0,.2,1)}#sidebar.sidebar-hidden{transform:translate(100%)}#sidebar-resize-handle{position:absolute;top:0;left:-4px;width:8px;height:100%;cursor:col-resize;z-index:20}#sidebar-resize-handle:after{content:"";position:absolute;top:50%;left:2px;transform:translateY(-50%);width:4px;height:40px;border-radius:2px;background:var(--border);transition:background .2s}#sidebar-resize-handle:hover:after{background:var(--border-vivid)}#sidebar-header{display:flex;align-items:center;gap:10px;padding:14px 16px;border-bottom:1px solid var(--border-dim);flex-shrink:0}#sidebar-close{width:28px;height:28px;border:none;background:var(--accent-bg);border-radius:6px;color:var(--accent);font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:background .2s}#sidebar-close:hover{background:var(--accent-bg-hover)}#sidebar-title{font-size:16px;font-weight:600;color:var(--title);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}#sidebar-voyage-actions{display:flex;align-items:center;gap:8px;flex-shrink:0}#sidebar-node-card{padding:12px 16px;border-bottom:1px solid var(--border-faint);flex-shrink:0}.node-kind{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.08em;color:var(--text-kind);margin-bottom:3px}.kind-icon{font-size:13px}.node-label{font-size:19px;font-weight:600;line-height:1.3;color:var(--heading);margin-bottom:6px}.node-synthesis{font-size:17px;line-height:1.55;color:var(--text-body-dim);margin-bottom:10px}.node-quote{font-size:14px;line-height:1.5;color:var(--quote-text);border-left:2px solid var(--border-strong);padding-left:10px;margin:0 0 8px;font-style:italic}.node-more-toggle{display:block;width:100%;margin-top:10px;padding:10px 0 0;background:none;border:none;border-top:1px solid var(--border-subtle);color:var(--text-dim);font-size:13px;font-weight:600;cursor:pointer;text-align:left;transition:color .2s}.node-more-toggle:before{content:"▸ "}.node-more-toggle-open:before{content:"▾ "}.node-more-toggle:hover{color:var(--text-chip)}.node-more-note-indicator{color:var(--accent);font-weight:400;font-size:11px}.node-more-content{padding-top:10px;padding-bottom:4px}.node-more-hidden{display:none}.node-note{margin-bottom:10px}.node-note-label{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-faint);margin-bottom:4px}.node-note-textarea{width:100%;background:var(--input-bg);border:1px solid var(--border);border-radius:6px;color:var(--body-text);font-family:inherit;font-size:13px;line-height:1.5;padding:8px 10px;resize:none;outline:none;overflow-y:auto;min-height:36px;max-height:200px;transition:border-color .2s}.node-note-textarea:focus{border-color:var(--border-focus)}.node-note-textarea::placeholder{color:var(--text-ghost)}.node-connections{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:8px}.node-connection{display:flex;flex-direction:column;gap:2px;flex:1 1 45%;min-width:0;padding:8px 10px;background:var(--interactive-bg);border:1px solid var(--border-dim);border-radius:6px;cursor:pointer;transition:background .2s,border-color .2s;text-align:left;color:inherit}.node-connection:hover{background:var(--interactive-hover);border-color:var(--border-strong)}.connection-type{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-dim)}.connection-label{font-size:14px;color:var(--text-secondary);line-height:1.3;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chip-icon{margin-right:5px;display:inline-block}.node-siblings{display:flex;flex-wrap:wrap;gap:5px;margin-top:10px}.node-siblings-label{width:100%;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-faint);margin-bottom:4px}.idea-chip{padding:5px 12px;font-size:13px;font-weight:500;background:var(--interactive-bg-strong);border:1px solid var(--border);border-radius:10px;color:var(--text-chip);cursor:pointer;transition:background .2s,border-color .2s;white-space:nowrap;max-width:200px;overflow:hidden;text-overflow:ellipsis}.idea-chip:hover{background:var(--interactive-hover-strong);border-color:var(--border-bright)}.idea-chip-active{background:var(--accent-bg-active);border-color:var(--accent-border);color:var(--accent)}#sidebar-body{flex:1;overflow-y:auto;padding:20px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:16px;line-height:1.75;color:var(--body-text);background:var(--body-bg)}#sidebar-body p{margin-bottom:1em}#sidebar-body h2{font-size:18px;margin:1.4em 0 .5em;color:var(--heading)}#sidebar-body h3{font-size:16px;margin:1.2em 0 .4em;color:var(--subheading)}#sidebar-body blockquote{border-left:3px solid var(--border-bright);padding-left:14px;margin:.8em 0;color:var(--text-blockquote);font-style:italic}#sidebar-body ul,#sidebar-body ol{margin:.8em 0;padding-left:20px}#sidebar-body li{margin-bottom:.3em}#sidebar-body pre{max-width:100%;overflow-x:auto;background:var(--interactive-bg);border:1px solid var(--border-dim);border-radius:6px;padding:12px;font-size:13px;line-height:1.5;margin:.8em 0}#sidebar-body code{font-family:SF Mono,Fira Code,Cascadia Code,monospace;font-size:.9em}#sidebar-body :not(pre)>code{background:var(--interactive-bg);padding:2px 5px;border-radius:3px}#sidebar-body a{color:var(--accent-link);text-decoration:none}#sidebar-body a:hover{text-decoration:underline}#sidebar-body img{max-width:100%;height:auto;object-fit:contain;border-radius:4px;margin:.8em 0;display:block}mark.current-quote{background:#3c8cdc2e;color:var(--highlight-text);padding:2px 1px;border-radius:2px;border-bottom:2px solid var(--highlight-underline);cursor:pointer}mark.sibling-quote{background:#78b4f014;color:var(--body-text);padding:2px 1px;border-radius:2px;border-bottom:1px dashed rgba(120,180,240,.25);cursor:pointer;transition:background .2s}mark.sibling-quote:hover{background:#3c8cdc2e}#settings-panel{position:fixed;top:16px;left:16px;z-index:15}#settings-toggle{padding:6px 14px;font-size:11px;font-weight:600;background:var(--panel-bg-medium);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid var(--border-medium);border-radius:6px;color:var(--text-muted);cursor:pointer;transition:background .2s}#settings-toggle:hover{background:var(--hover-bg);color:var(--text-hover)}#settings-content{display:none;margin-top:8px;padding:12px 14px;background:var(--panel-bg);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border:1px solid var(--border);border-radius:8px;min-width:260px}#settings-content.settings-open{display:block}.settings-row{margin-bottom:10px}.settings-row label{display:block;font-size:11px;color:var(--text-muted);margin-bottom:3px}.settings-row input[type=range]{width:100%;height:4px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--slider-track);border-radius:2px;outline:none}.settings-row input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:14px;height:14px;border-radius:50%;background:var(--slider-thumb);cursor:pointer;border:none}.settings-value{font-size:10px;color:var(--text-dim);float:right;margin-top:-14px}#minimap{position:fixed;bottom:16px;left:16px;width:200px;height:200px;border-radius:8px;overflow:hidden;border:1px solid var(--border-strong);background:var(--panel-bg-light);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:10;transition:left .3s cubic-bezier(.4,0,.2,1)}#minimap.minimap-shifted{left:384px}#minimap-canvas{width:200px;height:200px}#hud{position:fixed;bottom:16px;left:50%;transform:translate(-50%);z-index:5;pointer-events:none}.hud-hint{display:inline-block;padding:6px 16px;font-size:12px;color:var(--text-dim);background:var(--panel-bg-faint);border-radius:20px;border:1px solid var(--border-dim)}::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--scrollbar);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-hover)}.voyage-star-btn{background:none;border:none;color:var(--star-inactive);font-size:18px;cursor:pointer;transition:color .2s;padding:0;line-height:1}.voyage-star-btn:hover,.voyage-star-btn.voyage-star-active{color:var(--star-active)}.voyage-visited-badge{font-size:9px;font-weight:600;color:var(--text-faint)}.voyage-comments-list{display:flex;flex-direction:column;gap:3px;margin-bottom:6px}.voyage-comment{font-size:11px;line-height:1.4;color:var(--comment-text);background:var(--interactive-bg-dim);padding:4px 8px;border-radius:4px;border-left:2px solid var(--border)}.voyage-comment-input{display:flex;gap:5px;align-items:flex-end;margin-bottom:8px}.voyage-comment-textarea{flex:1;background:var(--input-bg);border:1px solid var(--border);border-radius:5px;color:var(--body-text);font-family:inherit;font-size:11px;padding:5px 8px;resize:none;outline:none;overflow:hidden;min-height:28px;max-height:120px;transition:border-color .2s}.voyage-comment-textarea:focus{border-color:var(--border-focus)}.voyage-comment-textarea::placeholder{color:var(--text-ghost)}.voyage-comment-add{padding:5px 10px;font-size:10px;font-weight:600;background:var(--accent-bg);border:1px solid var(--border-medium);border-radius:5px;color:var(--accent);cursor:pointer;transition:background .2s;white-space:nowrap}.voyage-comment-add:hover{background:var(--accent-bg-hover)}#voyage-toggle{position:fixed;bottom:224px;left:16px;z-index:11;padding:6px 14px;font-size:11px;font-weight:600;background:var(--panel-bg-medium);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid var(--border-medium);border-radius:6px;color:var(--text-muted);cursor:pointer;transition:background .2s,color .2s,left .3s cubic-bezier(.4,0,.2,1)}#voyage-toggle.voyage-toggle-shifted{left:384px}#voyage-toggle:hover{background:var(--hover-bg);color:var(--text-hover)}#voyage-panel{position:fixed;bottom:16px;left:16px;width:360px;max-height:400px;z-index:12;background:var(--panel-bg-opaque);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border:1px solid var(--border-medium);border-radius:10px;display:none;flex-direction:column;overflow:hidden}#voyage-panel.voyage-panel-open{display:flex}.voyage-panel-header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--border-dim);flex-shrink:0}.voyage-panel-title{font-size:15px;font-weight:600;color:var(--title)}.voyage-panel-close{width:24px;height:24px;border:none;background:var(--accent-bg);border-radius:5px;color:var(--accent);font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s}.voyage-panel-close:hover{background:var(--accent-bg-hover)}.voyage-tabs{display:flex;gap:2px;padding:8px 10px;border-bottom:1px solid var(--border-subtle);flex-shrink:0}.voyage-tab{flex:1;padding:6px 8px;font-size:12px;font-weight:600;background:transparent;border:1px solid transparent;border-radius:5px;color:var(--text-tab);cursor:pointer;transition:background .2s,color .2s;text-align:center}.voyage-tab:hover{background:var(--interactive-bg);color:var(--text-chip)}.voyage-tab-active{background:var(--accent-bg);border-color:var(--border-strong);color:var(--accent)}.voyage-entries{flex:1;overflow-y:auto;padding:6px}.voyage-empty{text-align:center;padding:24px 16px;font-size:12px;color:var(--text-subtle);line-height:1.5}.voyage-entry{display:block;width:100%;padding:8px 10px;background:transparent;border:1px solid transparent;border-radius:6px;cursor:pointer;text-align:left;color:inherit;transition:background .15s,border-color .15s;margin-bottom:2px}.voyage-entry:hover{background:var(--interactive-bg);border-color:var(--border-dim)}.voyage-entry-top{display:flex;align-items:center;gap:6px}.voyage-entry-kind{font-size:12px;color:var(--text-dim);flex-shrink:0;width:16px;text-align:center}.voyage-entry-label{font-size:14px;font-weight:500;color:var(--entry-label);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.voyage-entry-star{color:var(--star-active);font-size:12px;flex-shrink:0}.voyage-entry-note-preview{margin-top:3px;padding-left:22px;font-size:12px;line-height:1.4;color:var(--text-muted);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.voyage-entry-meta{display:flex;gap:8px;margin-top:3px;padding-left:22px;font-size:12px;color:var(--text-subtle)}.voyage-footer{padding:10px;border-top:1px solid var(--border-faint);flex-shrink:0}.voyage-footer-row{display:flex;gap:6px}.voyage-export{flex:1;padding:8px 14px;font-size:13px;font-weight:600;background:var(--accent-bg-dim);border:1px solid var(--border-medium);border-radius:6px;color:var(--accent);cursor:pointer;transition:background .2s}.voyage-export:hover{background:var(--accent-bg-active)}.voyage-clear{padding:8px 12px;font-size:13px;font-weight:600;background:var(--danger-bg);border:1px solid var(--danger-border);border-radius:6px;color:var(--danger-text);cursor:pointer;transition:background .2s,color .2s}.voyage-clear:hover{background:var(--danger-hover-bg);color:var(--danger-hover-text)}#theme-toggle{position:fixed;top:16px;left:136px;z-index:15;padding:6px 14px;font-size:11px;font-weight:600;background:var(--panel-bg-medium);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid var(--border-medium);border-radius:6px;color:var(--text-muted);cursor:pointer;transition:background .2s,color .2s}#theme-toggle:hover{background:var(--hover-bg);color:var(--text-hover)}
